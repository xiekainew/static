{"version":3,"sources":["components/ClassifyView.js","page/home/index.js"],"names":["components_ClassifyView","ClassifyView","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","scroll","list","id","name","selected","refresh","width","length","refs","scrollContent","style","bscroll_esm","startX","click","scrollX","scrollY","eventPassthrough","setState","_this2","getCategories","res","concat","initScroll","getClassifyList","item","index","clickItem","target","document","transform","move","parseFloat","scrollTo","_this3","_react_16_8_6_react_default","a","createElement","className","ref","map","onClick","selectClassify","bind","join","key","rightMove","React","Component","DownButton","DownloadHoc","button_default","Banner","objectSpread","carousel_default","autoplay","infinite","class","backgroundImage","imageUrl","Footer","top","scrollTop","behavior","duration","goTop","type","Index","console","bannerList","liveList","height","clientHeight","_this4","getBannerList","data","toast_default","hide","_this5","loading","getClassifyLives","pageSize","pageNum","categoryId","recommand","setLiveList","info","fail","getBanner","getRecomment","pull_to_refresh_default","onRefresh","refreshData","overflow","NavTop","isHome","clickClassifyItem","refreshRecomment","home_Banner","RecommandList","scrollMain","wing_blank_default","size","home_Footer","parent","Guidance","assign","guidance","__webpack_exports__"],"mappings":"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","file":"static/js/14.1d7f9960.chunk.js","sourcesContent":["import React from 'react'\nimport BScroll from 'better-scroll'\nimport '../style/classify-view.scss'\nimport {\n\tgetCategories\n} from '../api/index.js'\n\nclass ClassifyView extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscroll: null,\n\t\t\tlist: [{\n\t\t\t\tid: 0,\n\t\t\t\tname: '推荐'\n\t\t\t}],\n\t\t\tselected: 0\n\t\t}\n\t}\n\tinitScroll() {\n\t\tif (this.state.scroll) {\n\t\t\tthis.state.scroll.refresh()\n\t\t} else {\n\t\t\tlet width = 52 * this.state.list.length\n\t\t\tthis.refs.scrollContent.style.width = width + 50 + 'px'\n\t\t\tlet scroll = new BScroll('.classify', {\n\t\t\t\tstartX: 0,\n\t\t\t\tclick: true,\n\t\t\t\tscrollX: true,\n\t\t\t\tscrollY: false,\n\t            eventPassthrough: 'vertical'\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tscroll: scroll\n\t\t\t})\n\t\t}\n\t}\n\tgetClassifyList() {\n\t\tgetCategories().then(res => {\n\t\t\tthis.setState({\n\t\t\t\tlist: this.state.list.concat(res.data || [])\n\t\t\t})\n\t\t\tthis.initScroll()\n\t\t})\n\t}\n\tcomponentDidMount() {\n\t\tthis.getClassifyList()\n\t}\n\tselectClassify(item, index) {\n\t\tthis.setState({\n\t\t\tselected: index\n\t\t})\n\t\tif (item.id === 0) {\n\t\t\tthis.props.refresh()\n\t\t\treturn\n\t\t}\n\t\tthis.props.clickItem(item)\n\t}\n\trightMove() {\n\t\tlet target = document.defaultView.getComputedStyle(this.refs.scrollContent, null).transform\n\t\ttarget = parseFloat(target.substring(7).split(',')[4])\n\t\tlet move = target ? target - 200 : -200\n\t\tthis.state.scroll.scrollTo(move, 0, 500)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className='classify'>\n\t\t\t\t<div className=\"classify-content\" ref='scrollContent'>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.list.map((item, index) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tonClick={this.selectClassify.bind(this, item, index)}\n\t\t\t\t\t\t\t\tclassName={['classify-content-item', this.state.selected === index ? 'selected' : null].join(' ')}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t><span>{item.name}</span></div>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className='classify-icon' onClick={this.rightMove.bind(this)}></div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default ClassifyView","import React from 'react'\nimport {\n\tCarousel,\n\tWingBlank,\n\tPullToRefresh,\n\tButton,\n\tToast\n} from 'antd-mobile'\nimport {\n\tgetBannerList,\n\tgetClassifyLives\n} from '../../api/index.js'\nimport {scrollTo} from 'scroll-js'\nimport RecommandList from '../../components/RecommandList.js'\nimport ClassifyView from '../../components/ClassifyView.js'\nimport NavTop from '../../components/NavTop.js'\nimport Guidance from '../../components/Guidance.js'\nimport DownloadHoc from '../../components/hoc/download-hoc.js'\n\nconst DownButton = DownloadHoc(Button)\n\n/**\n * banner组件\n */\nclass Banner extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {}\n\t}\n\trender() {\n\t\tlet {list} = {...this.props}\n\t\treturn (\n\t\t\t<Carousel\n\t\t\t\tautoplay\n\t\t\t\tinfinite\n\t\t\t\tclass='banner-wrapper'\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tlist.map((item, index) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName='banner-item'\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(${item.imageUrl})`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</Carousel>\n\t\t)\n\t}\n}\n\n/**\n * footer组件\n */\nclass Footer extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {}\n\t}\n\tgoTop() {\n\t\tlet target = document.getElementsByClassName('am-pull-to-refresh')[0]\n\t\tscrollTo(target, { top: -target.scrollTop, behavior: 'smooth', duration: 2000 })\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className='footer-wrapper'>\n\t\t\t\t<div className='footer-wrapper__top' onClick={this.goTop.bind(this)}>\n\t\t\t\t\t<span className='footer-wrapper__top-icon bg'></span><span>返回顶部</span>\n\t\t\t\t</div>\n\t\t\t\t<DownButton type='primary' className='footer-wrapper__button'>下载客户端</DownButton>\n\t\t\t\t<div className='footer-wrapper__copy'>\n\t\t\t\t\t版权所有 &copy; 2017-现在 <br/>备案号：粤ICP备18014271号-2\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass Index extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tconsole.log(props)\n\t\tthis.state = {\n\t\t\tbannerList: [],\n\t\t\tliveList: [],\n\t\t\theight: document.documentElement.clientHeight\n\t\t}\n\t}\n\tgetBanner() {\n\t\tgetBannerList('mobileBannerConfig').then(res => {\n\t\t\tthis.setState({\n\t\t\t\tbannerList: res.data\n\t\t\t})\n\t\t\tToast.hide()\n\t\t})\n\t}\n\tclickClassifyItem(item) {\n\t\tif (!item || !item.id) return\n\t\tToast.loading('正在加载...', 0)\n\t\tgetClassifyLives({\n\t\t\tpageSize: 100,\n\t\t\tpageNum: 1,\n\t\t\tcategoryId: item.id\n\t\t}).then(res => {\n\t\t\tToast.hide()\n\t\t\tif (res.code === 0) {\n\t\t\t\tif (!res.data.list.length) {\n\t\t\t\t\tToast.info('该分类下暂无直播间！', 1, null, false)\n\t\t\t\t} else {\n\t\t\t\t\tthis.refs.recommand.setLiveList(res.data.list)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tToast.fail('接口报错', 2)\n\t\t\t}\n\t\t})\n\t}\n\trefreshData() {\n\t\tthis.getBanner()\n\t\tthis.refs.recommand.getRecomment()\n\t}\n\trefreshRecomment() {\n\t\tthis.refs.recommand.getRecomment()\n\t}\n\tcomponentDidMount() {\n\t\tthis.getBanner()\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<PullToRefresh\n\t\t\t\t\tonRefresh={this.refreshData.bind(this)}\n\t\t\t\t\tstyle={{\n\t\t\t           \theight: this.state.height,\n\t\t\t          \toverflow: 'auto'\n\t\t\t        }}\n\t\t\t\t>\n\t\t\t\t\t<NavTop isHome></NavTop>\n\t\t\t\t\t<ClassifyView\n\t\t\t\t\t\tclickItem={this.clickClassifyItem.bind(this)}\n\t\t\t\t\t\trefresh={this.refreshRecomment.bind(this)}\n\t\t\t\t\t></ClassifyView>\n\t\t\t\t\t<Banner list={this.state.bannerList}></Banner>\n\t\t\t\t\t<RecommandList ref='recommand' scrollMain={document.getElementsByClassName('am-pull-to-refresh')[0]}></RecommandList>\n\t\t\t\t\t<WingBlank size='md'>\n\t\t\t\t\t\t<Footer parent={this.refs.refresh}></Footer>\n\t\t\t\t\t</WingBlank>\n\t\t\t\t</PullToRefresh>\n\t\t\t\t<Guidance guidance {...this.props}></Guidance>\n\t\t\t</div>\n\t\t)\n\t}\n}\nexport default Index\n"],"sourceRoot":""}