{"version":3,"sources":["components/hoc/player-hoc.js","components/jplayer.js","page/detail/index.js"],"names":["NonePlayer","_react_16_8_6_react_default","a","createElement","className","this","props","liveData","id","React","Component","_Player","Jplayer","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","domId","isPlay","isEnd","isLiveLoading","str","option","options","replaceStr","5","13","1001","1002","2032","2048","TcPlayer","listener","bind","e","console","msg","setState","defaultProps","PlayerHoc","WrappedComponent","jplayer_Jplayer","_React$Component2","apply","arguments","inherits","createClass","key","value","status","player_hoc_NonePlayer","assign","ref","DownButton","DownloadHoc","button_default","Detail","liveId","match","params","targetScroll","_this2","getLivesData","res","data","refs","jplayer","play","init","rtmp","pullAddr","poster","cover","fetchData","objectSpread","NavTop","components_jplayer","ZfImg","url","figureUrl","nickname","typeName","hitsFilter","hits","type","RecommandList","Guidance","__webpack_exports__"],"mappings":"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","file":"static/js/11.3dd232f9.chunk.js","sourcesContent":["import React from 'react'\n\nclass NonePlayer extends React.Component{\n\trender() {\n\t\treturn (\n\t\t\t<div className='jplayer jplayer-none'>\n\t\t\t\t<div className='jplayer-room'><span>房间号：{this.props.liveData.id}</span></div>\n\t\t\t\t<div className=\"jplayer-none__text\">主播不在直播哦～ <br/>关注主播开通及时通知</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default WrappedComponent => {\n\tclass PlayerHoc extends React.Component{\n\t\trender() {\n\t\t\treturn this.props.liveData.status !== 1 ? <NonePlayer {...this.props}/> :\n\t\t\t\t\t<WrappedComponent ref='play' {...this.props}/>\n\t\t}\n\t}\n\treturn PlayerHoc\n}","import React from 'react'\nimport '../style/jplayer.scss'\nimport PlayerHoc from './hoc/player-hoc.js'\n// import LiveLoading from './LiveLoading.js'\n// eslint-disable-next-line\nlet _Player = null\nclass Jplayer extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tdomId: 'm-player',\n\t\t\tisPlay: false,\n\t\t\tisEnd: true,\n\t\t\tisLiveLoading: false\n\t\t}\n\t}\n\tstatic defaultProps = {\n\t\tliveData: {}\n\t}\n\treplaceStr(str) {\n\t\treturn str ? str.replace(/\\?/g, '.m3u8?').replace(/rtmp/, 'https') : ''\n\t}\n\tinit(option) {\n\t\ttry {\n            let options = option\n            options.width = '100%'\n            options.height = '100%'\n            options.autoplay = true // 自动播放\n            // options.controls = \"none\";\n            // options.m3u8 = 'https://1256993030.vod2.myqcloud.com/d520582dvodtransgzp1256993030/cc9f922c5285890781386012275/v.f220.m3u8';\n            options.m3u8 = this.replaceStr(options.rtmp)\n            options.wording = {\n                5: 'flash未启用',\n                13: '直播已结束',\n                1001: '网络错误，请检查网络配置或者播放链接是否正确。',\n                1002: '获取视频失败，请检查播放链接是否有效。',\n                2032: '请求视频失败，请检查网络',\n                2048: '请求m3u8文件失败，可能是网络错误或者跨域问题'\n            }\n            // eslint-disable-next-line\n            _Player = new TcPlayer(this.state.domId, options)\n            _Player.listener = this.listener.bind(this)\n        } catch (e) {\n            console.log(e)\n        }\n\t}\n    componentWillUnmount() {\n        _Player.destroy()\n    }\n\tlistener(msg) {\n        if (msg.type === 'play') {\n            this.setState({\n            \tisPlay: true\n            })\n        }\n        if (msg.type === 'pause') {\n            this.setState({\n            \tisPlay: false\n            })\n        }\n        if (msg.type === 'ended') {\n            this.setState({\n            \tisEnd: true\n            })\n        }\n        if (msg.type === 'error') {\n            this.setState({\n            \tisEnd: true\n            })\n        }\n        if (msg.type === 'load') {\n            this.setState({\n            \tisLiveLoading: true\n            })\n        }\n        if (msg.type === 'timeupdate' && this.state.isLiveLoading) {\n            this.setState({\n            \tisLiveLoading: false\n            })\n        }\n    }\n\tcomponentDidMount() {\n        console.log(this.props)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className='jplayer'>\n\t\t\t\t<div id={this.state.domId} className='jplayer-wrapper'></div>\n\t\t\t\t<div className='jplayer-room'><span>房间号：{this.props.liveData.id}</span></div>\n\t\t\t\t{\n\t\t\t\t\t// (this.props.liveData.status === 1 && this.state.isLiveLoading) ? <LiveLoading></LiveLoading> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n// export default Jplayer\nexport default PlayerHoc(Jplayer)\n","import React from 'react'\nimport { Button } from 'antd-mobile'\nimport '../../style/detail.scss'\nimport Jplayer from '../../components/jplayer.js'\nimport {\n\tgetLivesData\n} from '../../api/index.js'\nimport {\n\thitsFilter\n} from '../../common/utils.js'\nimport RecommandList from '../../components/RecommandList.js'\nimport NavTop from '../../components/NavTop.js'\nimport Guidance from '../../components/Guidance.js'\nimport DownloadHoc from '../../components/hoc/download-hoc.js'\nimport ZfImg from '../../components/ZfImg.js'\n\nconst DownButton = DownloadHoc(Button)\n\nclass Detail extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tliveId: this.props.match.params.id,\n\t\t\tliveData: {},\n\t\t\ttargetScroll: null\n\t\t}\n\t}\n\tfetchData() {\n\t\tgetLivesData(this.state.liveId).then(res => {\n\t\t\tif (res.code === 0) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tliveData: res.data\n\t\t\t\t})\n\t\t\t\tif (res.data.status === 1) {\n\t\t\t\t\tthis.refs.jplayer.refs.play.init({\n\t\t\t\t\t\trtmp: res.data.pullAddr,\n\t\t\t\t\t\tposter: res.data.cover\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\tcomponentDidMount() {\n\t\tthis.fetchData()\n\t}\n\t// componentWillReceiveProps(nextProps) {\n\t// \t// if (nextProps.location.pathname != this.props.location.pathname) {\n\t// \t// \tthis.fetchData()\n\t// \t// }\n\t// }\n\trender() {\n\t\tlet {liveData} = {...this.state}\n\t\treturn (\n\t\t\t<div className='detail'>\n\t\t\t\t<NavTop></NavTop>\n\t\t\t\t<Jplayer\n\t\t\t\t\tref='jplayer'\n\t\t\t\t\tliveData={liveData}\n\t\t\t\t></Jplayer>\n\t\t\t\t<div className='detail-live'>\n\t\t\t\t\t<div className='detail-live__header'\n\t\t\t\t\t>\n\t\t\t\t\t\t<ZfImg\n\t\t\t\t\t\t\tclassName='detail-live__header-image bg'\n\t\t\t\t\t\t\turl={liveData.figureUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='detail-live__center'>\n\t\t\t\t\t\t<div className='detail-live__center-name'>{liveData.nickname}</div>\n\t\t\t\t\t\t<div className='detail-live__center-number'>抓饭号：{this.state.liveId}</div>\n\t\t\t\t\t\t<div className='detail-live__center-hint'>\n\t\t\t\t\t\t\t{liveData.typeName}\n\t\t\t\t\t\t\t<span className='detail-live__center-hint-line'></span>\n\t\t\t\t\t\t\t人气：<span className='detail-live__center-hint-hits'>{hitsFilter(liveData.hits)}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='detail-live__follow'>\n\t\t\t\t\t\t<DownButton className='detail-live__follow-button' type='primary'><span>+</span>关注</DownButton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className='detail-notice'>\n\t\t\t\t\t<div className='detail-notice__text'>\n\t\t\t\t\t\t{liveData.notice ? liveData.notice : '暂无公告！'}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<RecommandList></RecommandList>\n\t\t\t\t<div className='detail-more'>\n\t\t\t\t\t<DownButton type='primary'>打开抓饭直播看更多精彩内容</DownButton>\n\t\t\t\t</div>\n\t\t\t\t<Guidance liveData={this.state.liveData} {...this.props}></Guidance>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Detail"],"sourceRoot":""}