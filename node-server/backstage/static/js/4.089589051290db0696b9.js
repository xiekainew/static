webpackJsonp([4],{"6oVN":function(t,e){},UFkz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),o=i("NYxO"),s=i("patu"),r=i("f744"),l=i("t5DY"),d={data:function(){return{editVisible:!1,detaultProps:{children:"children",label:"title"},dataModel:{id:"",title:"",icon:"",path:"",sort:"",parent:""},parent:""}},mixins:[r.a],components:{HiForm:s.a},computed:n()({},o.a.mapState({menuList:function(t){return t.menuList}})),mounted:function(){},methods:{confirm:function(){var t=this;this.validator(this.$refs.form)||Object(l.b)(this.dataModel).then(function(e){0===e.status&&(t.$message.success("成功！"),t.$store.dispatch("getMenu"),t.editVisible=!1)})},show:function(){this.editVisible=!0},edit:function(t){this.dataModel.id=t.id,this.dataModel.title=t.title,this.dataModel.icon=t.icon,this.dataModel.path=t.path,this.dataModel.sort=t.sort,this.dataModel.parent=t.parent,this.show()},append:function(t){this.dataModel.parent=t.id,this.parent=t.title,this.show()},remove:function(t){var e=this;this.$confirm("确认删除吗？","友情提示",{type:"warning"}).then(function(){Object(l.d)({id:t.id}).then(function(t){0===t.status&&(e.$message.success("成功！"),e.$store.dispatch("getMenu"),e.editVisible=!1)})})},closeOver:function(){this.dataModel.parent="",this.parent="",this.dataModel.id="",this.dataModel.title="",this.dataModel.icon="",this.dataModel.path="",this.dataModel.sort=""},renderContent:function(t,e){var i=this,a=e.node,n=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[a.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(){return i.append(n)}}},["添加"]),t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(){return i.edit(n)}}},["修改"]),t("el-button",{attrs:{size:"mini",type:"danger",disabled:Boolean(n.children&&n.children.length)},on:{click:function(){return i.remove(n)}}},["删除"])])])}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu"},[i("div",{staticClass:"menu-bar"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.show}},[t._v("添加一级菜单")])],1),t._v(" "),i("el-tree",{attrs:{data:t.menuList,props:t.detaultProps,"render-content":t.renderContent,"expand-on-click-node":!1}}),t._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e},close:t.closeOver}},[i("el-form",{ref:"form",attrs:{"label-width":"120px"}},[i("hi-form",{attrs:{label:"标题",required:"",prop:"v"},model:{value:t.dataModel.title,callback:function(e){t.$set(t.dataModel,"title",e)},expression:"dataModel.title"}}),t._v(" "),i("hi-form",{attrs:{label:"图标",required:"",prop:"v"},model:{value:t.dataModel.icon,callback:function(e){t.$set(t.dataModel,"icon",e)},expression:"dataModel.icon"}}),t._v(" "),i("hi-form",{attrs:{label:"路径"},model:{value:t.dataModel.path,callback:function(e){t.$set(t.dataModel,"path",e)},expression:"dataModel.path"}}),t._v(" "),i("hi-form",{attrs:{label:"排序"},model:{value:t.dataModel.sort,callback:function(e){t.$set(t.dataModel,"sort",e)},expression:"dataModel.sort"}}),t._v(" "),t.dataModel.id?t._e():i("hi-form",{attrs:{label:"父节点",disabled:""},model:{value:t.parent,callback:function(e){t.parent=e},expression:"parent"}})],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(d,c,!1,function(t){i("6oVN")},null,null);e.default=u.exports},f744:function(t,e,i){"use strict";e.a={methods:{validator:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=null,a=arguments[2]?"checkErrorValue":"checkValue";return t.$children.map(function(t){t.prop&&t[a]&&(e.length?-1!==e.indexOf(t.prop)&&(i?t[a]():i=t[a]()):i?t[a]():i=t[a]())}),i},validatorError:function(t){return this.validator(t,[],!0)},reset:function(t){t.$children.map(function(t){t.reset&&t.reset()})},back:function(){this.$router.go(-1)}}}}});
//# sourceMappingURL=4.089589051290db0696b9.js.map